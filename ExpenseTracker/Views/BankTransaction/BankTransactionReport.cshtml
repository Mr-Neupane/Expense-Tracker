@model IEnumerable<dynamic>

@{
    ViewData["Title"] = "Bank Transaction Report";
}

<h2 class="mt-3 mb-4 text-center font-weight-bold">Bank Transaction Report</h2>

<table class="table table-responsive table-striped table-hover" style="border-collapse: collapse;" id="datatable">
    <thead class="bg-dark text-white text-center">
    <tr>
        <th style="width: 50px;">SN</th>
        <th>Bank Name</th>
        <th>Transaction Date</th>
        <th class="text-right">Amount</th>
        <th>Type</th>
        <th>Recorded By</th>
        <th style="width: 110px;">Action</th>
    </tr>
    </thead>

    <tbody>
    @{
        int sn = 1;
    }

    @foreach (var item in Model)
    {
        <tr>
            <td class="text-center">@sn</td>

            <td>@item.bankname</td>

            <td>
                @(new NepDate.NepaliDate(item.txn_date))
            </td>

            <td class="text-right">@String.Format("{0:N2}", item.amount)</td>

            <td>@item.type</td>

            <td>@item.username</td>

            <td class="text-center">
                <a asp-action="ReverseBankTransaction"
                   asp-route-transactionid="@item.TransactionId"
                   asp-route-id="@item.id"
                   asp-route-type="@item.type"
                   asp-route-bankid="@item.bankid"
                   asp-route-amount="@item.amount"
                   class="btn btn-sm btn-danger"
                   onclick="return confirm('Are you sure you want to reverse this transaction?')">
                    Reverse
                </a>
            </td>
        </tr>

        sn++;
    }
    </tbody>
</table>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

@if (TempData["AlertMessage"] != null)
{
    <div class="alert alert-danger">
        @TempData["AlertMessage"]
    </div>
}
